name: .NET Core build

on:
    push:
        branches: ["master"]
    pull_request:
        branches: ["master"]

jobs:
    dotnet-build:
        runs-on: ubuntu-latest

        steps:
          - uses: actions/checkout@v3
          - name: Setup .NET
            uses: actions/setup-dotnet@v2
            with:
              dotnet-version: 8.0.x
          - name: Restore Dependencies
            run: dotnet restore
          - name: Build
            run: dotnet build --no-restore
          - name: Test
            run: dotnet test --no-build --verbosity normal
          - name: Publish
            run: dotnet publish -c Release -o ../out
            working-directory: ./RubikCube